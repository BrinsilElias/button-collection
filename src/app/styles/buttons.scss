:where(button, input[type='button'], input[type='submit'], input[type='reset'], input[type='file'], [role='button']),
:where(input[type='file'])::file-selector-button {
    --_padding-inline: 1em;
    --_padding-block: 0.25em;
    --_border-radius: #{$radius-2};
    --_highlight-size: 0;
    --_shadow-1: 0 1px 2px -1px hsl(var(--_shadow-color) / calc(var(--_shadow-strength) + 9%));
    --_shadow-2: 0 3px 5px -2px hsl(var(--_shadow-color) / calc(var(--_shadow-strength) + 3%)),
        0 7px 14px -5px hsl(var(--_shadow-color) / calc(var(--_shadow-strength) + 5%));
    --_icon-size: #{$size-icon-sm};
    --_icon-color: var(--_text);

    border-radius: var(--_border-radius);
}

@include color-scheme($os-dark) {
    :where(button, input[type='button'], input[type='submit'], input[type='reset'], input[type='file'], [role='button']),
    :where(input[type='file'])::file-selector-button {
        --_text: hsl(210deg 5% 95%);
        --_bg: hsl(210deg 9% 31%);
        --_border: hsl(210deg 9% 31%);
        --_shadow-color: 220deg 40% 2%;
        --_shadow-strength: 25%;
        --_shadow-depth: 0 1px var(--_bg);
        --_ink-shadow: 0 1px 0 hsl(210deg 11% 15%);
        --_highlight: hsl(210deg 10% 5% / 25%);
        --_input-well: hsl(200deg 10% 6%);

        line-height: 1.5;
    }
}

@include color-scheme($os-light) {
    :where(button, input[type='button'], input[type='submit'], input[type='reset'], input[type='file'], [role='button']),
    :where(input[type='file'])::file-selector-button {
        --_text: hsl(210deg 10% 30%);
        --_bg: hsl(0deg 0% 100%);
        --_border: hsl(210deg 14% 89%);
        --_shadow-color: 220deg 3% 15%;
        --_shadow-strength: 1%;
        --_shadow-depth: 0 1px var(--_border);
        --_ink-shadow: 0 1px 0 var(--_border);
        --_highlight: hsl(210deg 10% 71% / 25%);
        --_input-well: hsl(210deg 16% 87%);

        line-height: 1.5;
    }
}

@include reduce-motion ($motion-ok) {
    :where(button, input[type='button'], input[type='submit'], input[type='reset'], input[type='file'], [role='button']),
    :where(input[type='file'])::file-selector-button { 
        --_transition: box-shadow 145ms ease,
            outline-offset 145ms ease;
    }
}

:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button']),
:where(input[type='file'])::file-selector-button {
    cursor: pointer;
    touch-action: manipulation;
    font-size: var(--_size, 1rem);
    background: var(--_bg);
    color: var(--_text);
    border: 2px solid var(--_border);
    box-shadow: 
        var(--_shadow-2),
        var(--_shadow-depth),
        0 0 0 var(--_highlight-size) var(--_highlight);
    text-shadow: var(--_ink-shadow);
    text-decoration: none;
    transition: var(--_transition);
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: $size-relative-2;
    font-weight: $font-weight-5;
    padding-block: var(--_padding-block);
    padding-inline: var(--_padding-inline);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}

/* --- icons --- */
:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button']) :where(svg, [data-icon]) {
    block-size: var(--_icon-size);
    inline-size: var(--_icon-size);
    stroke: var(--_icon-color);
    filter: drop-shadow(var(--_ink-shadow));
    flex-shrink: 0;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* --- focus --- */
:where(button, input, [role='button']):where(:not(:active)):focus-visible {
    outline-offset: 5px;
}

/* --- pressing --- */
:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button']):where(:not(:active):hover) {
    --_highlight-size: .5rem;
}

/* --- disabled --- */
:where(button, input[type='button'], input[type='submit'], input[type='reset'])[disabled] {
    --_bg: none;

    cursor: not-allowed;
    box-shadow: var(--_shadow-1);

    @include color-scheme($os-dark) { --_text: hsl(210deg 11% 71%); }
    @include color-scheme($os-light) { --_text: hsl(210deg 7% 40%); }
}

/* --- red reset --- */
:where([type='reset']) {
    @include color-scheme($os-dark) { --_text: hsl(0deg 100% 89%); }
    @include color-scheme($os-dark) {
        --_border: hsl(0deg 100% 83%);
        --_highlight: hsl(0deg 100% 89% / 20%);
        --_text: hsl(0deg 80% 50%); 
    }
}

:where([type='reset']):focus-visible {
    outline-color: currentcolor;
}

/* --- file input --- */
:where(input[type='file']) {
    inline-size: 100%;
    max-inline-size: max-content;
    background-color: var(--_input-well);
}

:where(input[type='button']),
:where(input[type='file'])::file-selector-button {
    appearance: none;
}

:where(input[type='file'])::file-selector-button {
    margin-inline-end: var(--_padding-inline);
}

/* --- Size Attribute --- */
:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button'])[data-size='sm'],
:where(input[type='file'][data-size='sm'])::file-selector-button {
    --_size: 0.875rem;
}

:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button'])[data-size='md'],
:where(input[type='file'][data-size='md'])::file-selector-button {
    --_size: 1rem;
}

:where(button, input[type='button'], input[type='submit'], input[type='reset'], [role='button'])[data-size='lg'],
:where(input[type='file'][data-size='lg'])::file-selector-button {
    --_size: 1.25rem;
}
